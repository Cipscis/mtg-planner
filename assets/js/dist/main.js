(()=>{"use strict";const n="/api/cards";function e(...e){return new Promise((async(t,a)=>{const r=`${n}?names=${e.map(encodeURIComponent).join("|")}`,s=await fetch(r);if(s.ok){const n=await s.json();Array.isArray(n)&&n.every((n=>{return null===n||!(!(e=n)||"object"!=typeof e||"card"!==e.object);var e}))?t(n):(console.error(n),a(new Error("Response data format unrecognised.")))}else a(new Error(`Response not ok. Status: ${s.status} ${s.statusText}`))}))}class t extends class{name;data;ready;#n;constructor(n){"string"==typeof n&&(n={name:n}),this.name=n.name,this.ready=new Promise(((n,e)=>{this.#n=()=>{n(this)}})),!0!==n.defer&&this.getData()}async getData(n){return void 0===this.data?(this.data=n||await async function(n){return(await e(n))[0]}(this.name),this.#n()):n&&console.warn("WARNING: `Card.getData` should not be passed data once a Card has already had data retreived."),this.data}}{quantity;flags;groups;overrides;isLand;cmc;manaValue;constructor(n){n.defer=!0,super(n),this.quantity=n.quantity,n.flags&&(this.flags=n.flags),n.groups&&(this.groups=n.groups),n.overrides&&(this.overrides=n.overrides),this.ready.then((()=>{if(this.isLand=!!this.data.type_line.match(/\bLand\b/),!1===this.isLand){const n=this.overrides?.get("CMC");this.cmc=n&&"number"==typeof n?n:this.data.cmc,this.manaValue=this.cmc}}))}toString(){return a(this)}}function a(n){let e=`${n.quantity}x ${n.name}`;return n.flags&&(e+=Array.from(n.flags).map((n=>` *${n}*`)).join("")),n.groups&&(e+=Array.from(n.groups).map((n=>` #${n}`)).join("")),n.overrides&&(e+=Array.from(n.overrides).map((n=>` *${n.join(":")}*`)).join("")),e}function r(n){return n.split("\n").map(s).filter((n=>n instanceof t))}function s(n){const e=function(n){const e=n.match(/\s+\*[^:]+?\*/g);if(e)return new Set(e.map((n=>n.replace(/^\s+\*|\*$/g,""))))}(n),a=function(n){const e=n.match(/\s+#\S+/g);if(e)return new Set(e.map((n=>n.replace(/^\s+#/,""))))}(n),r=function(n){const e=n.match(/\s+\*.+?:.+?\*/g);if(e){const n=e.map((n=>n.replace(/^\s+\*|\*$/g,"").split(":")));if(n.every((n=>2===n.length)))return new Map(n)}}(n),s=function(n,e){if(e){if(e.flags){const t=new RegExp(`\\s+\\*(${Array.from(e.flags).join("|")})\\*`,"g");n=n.replace(t,"")}if(e.groups){const t=new RegExp(`\\s+#(${Array.from(e.groups).join("|")})\\b`,"g");n=n.replace(t,"")}if(e.overrides){const t=Array.from(e.overrides).map((n=>n.join(":"))),a=new RegExp(`\\s+\\*(${t.map((n=>n.replace(/(\{|\})/g,"\\$1"))).join("|")})\\*`,"g");n=n.replace(a,"")}}return n}(n,{flags:e,groups:a,overrides:r}),[o,i]=function(n){const e=n.match(/^(\d+)x (.+)/);return e?[parseInt(e[1],10),e[2]]:[,,]}(s);return o&&i?new t({name:i,quantity:o,flags:e,groups:a,overrides:r}):null}class o{name;cards;ready;constructor(n){"string"==typeof n?(this.name="New Deck",this.cards=r(n)):"length"in n?(this.name="New Deck",this.cards=n.concat()):(this.name=n.name,"string"==typeof n.cards?this.cards=r(n.cards):this.cards=n.cards.concat()),this.ready=new Promise(((n,e)=>{Promise.all(this.cards.map((n=>n.ready))).then((()=>n(this)))})),e(...this.cards.map((n=>n.name))).then((n=>{for(let[e,t]of this.cards.entries()){const a=n[e];t.getData(a)}}))}get numCards(){return this.cards.reduce(((n,e)=>n+e.quantity),0)}get manaCurve(){const n=new Map;return this.cards.forEach((e=>{const t=e.manaValue;void 0!==t&&(!1===n.has(t)?n.set(t,1):n.set(t,n.get(t)+1))})),n}toString(){return this.cards.map(a).join("\n")}}const i=document.querySelector(".js-deck-area");if(i){const n=new o({name:"Marath",cards:"1x Abzan Falconer\n1x Arcbond\n1x Atla Palani, Nest Tender *F*\n1x Aura Shards\n1x Beast Whisperer\n1x Bellowing Aegisaur\n1x Boros Charm\n1x Boros Garrison\n1x Boros Guildgate\n1x Boros Signet\n1x Braid of Fire\n1x Brash Taunter\n1x Cacophodon\n1x Colossal Majesty\n1x Command Tower\n1x Congregation at Dawn\n1x Death's Presence\n1x Dense Foliage\n1x Elemental Bond\n1x Enduring Scalelord\n1x Evolving Wilds\n1x Fertilid\n1x Forerunner of the Empire\n5x Forest\n1x Forgotten Ancient\n1x Fury Storm\n1x Gideon's Sacrifice\n1x Gift of Immortality\n1x Gishath, Sun's Avatar\n1x Gleam of Authority\n1x Gruul Guildgate\n1x Gruul Signet\n1x Gruul Turf\n1x Hardened Scales\n1x Hornet Nest\n1x Hungering Hydra\n1x Hydra's Growth\n1x Idol of Oblivion\n1x Illusionist's Bracers\n1x Inspiring Call\n1x Jungle Shrine\n1x Longshot Squad\n1x Marath, Will of the Wild *CMDR*\n1x Marauding Raptor\n1x Mosswort Bridge\n6x Mountain\n1x Needletooth Raptor\n1x Nomads en-Kor\n1x Opal Palace\n1x Oran-Rief, the Vastwood\n1x Overgrowth\n1x Path of Discovery\n1x Pir, Imaginative Rascal\n7x Plains\n1x Polyraptor\n1x Pyrohemia\n1x Ranging Raptors\n1x Raptor Hatchling\n1x Ripjaw Raptor\n1x Rite of Passage\n1x Rugged Highlands\n1x Seedborn Muse\n1x Selesnya Guildgate\n1x Selesnya Sanctuary\n1x Shaman en-Kor\n1x Shinewend\n1x Siegehorn Ceratops\n1x Silverclad Ferocidons\n1x Solidarity of Heroes\n1x Song of Freyalise\n1x Stone Quarry\n1x Summoner's Pact *CMC:4* *COST:{2}{G}{G}*\n1x Sungrass Prairie\n1x Swiftfoot Boots\n1x Terramorphic Expanse\n1x Timber Gorge\n1x Together Forever\n1x Tranquil Expanse\n1x Trapjaw Tyrant\n1x Ulasht, the Hate Seed\n1x Unbreakable Formation\n1x Veil of Summer\n1x Victory Chimes\n1x Wilderness Reclamation\n1x Wind-Scarred Crag"});n.ready.then((()=>{i.innerHTML=(n=>`\n\t<section class="deck">\n\t\t<h1 class="deck__name">${n.name}</h1>\n\n\t\t<dl class="deck__mana-curve">\n\t\t\t${Array.from(n.manaCurve).sort(((n,e)=>n[0]-e[0])).map((([n,e])=>`\n\t\t\t\t<div class="deck__mana-curve__item">\n\t\t\t\t\t<dt class="deck__mana-curve__value">${n}</dt>\n\t\t\t\t\t<dd class="deck__mana-curve__number" style="height: ${e}em;">${e}</dt>\n\t\t\t\t</div>\n\t\t\t`)).join("")}\n\t\t</dl>\n\n\t\t<ul class="deck__cards">\n\t\t\t${n.cards.map((n=>(n=>`\n\t<div class="deck__card">${n}</div>\n`)(n))).join("")}\n\t\t</ul>\n\t</section>\n`)(n)}))}})();
//# sourceMappingURL=main.js.map